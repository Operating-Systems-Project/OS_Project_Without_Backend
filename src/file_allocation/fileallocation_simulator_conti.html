<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <title>Operating Systems Project</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/starter-template/">

    <style>
        .button {
            background-color: #4CAF50;
            /* Green */
            border: none;
            color: white;
            padding: 16px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            transition-duration: 0.4s;
            cursor: pointer;
        }

        .button4 {
            background-color: white;
            color: black;
            border: 2px solid #e7e7e7;
        }

        .button4:hover {
            background-color: #e7e7e7;
        }
    </style>
    <link href="../../template.css" rel="stylesheet">

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="stylesfile.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- <script src="file.js"></script> -->
    <link rel="stylesheet" type="text/css"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" />
</head>

<body>

    <div class="header bg-dark">
        <div class="heading">
            Contiguous Allocation
        </div>
        <nav class="navbar navbar-expand-lg navbar-light bg-dark text-white">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse text-white" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item ">
                        <a class="nav-link " href="../../index.html">Home<span class="sr-only"></span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="fileallocation_theory.html">Theory</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link current" href="#">Simulator</a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>


    <div class="container" style="padding-top: 50px;">
        </br>
        <div class="jumbotron">

            <script>
                function option(nameSelect) {
                    console.log(nameSelect);
                    document.getElementById("admDivCheck").style.display = "none";
                }
            </script>
            <p>The allocation method defines how the files are stored in the disk blocks. The direct access nature of
                the disks gives us the flexibility to implement the files.</p>
            </br>
            <form>
                <fieldset>
                    <div class="row">
                        <div class="form-group" style="margin-left:50px; float:left;">
                            <label for="exampleSelect1">Algorithm</label>
                            <select class="form-control" id="algorithm" onchange="option(this);">
                                <option id="op1" value="contiguous">Contiguous</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-left: 50px;float: left;display: none;" id="admDivCheck">
                        </div>
                    </div>
                    <div class="row">
                        <!--  <div class="form-group" style="margin-left:50px; float:left;  width: 20%">
                                <label class="col-form-label" for="inputDefault">File Input Size</label>
                                <input class="form-control" id="bitstream-input" name="bitstream" placeholder="Space-separated sequence" type="text" size="35">
                            </div> -->
                        <div class="form-group" style="margin-left:50px; float:left; width: 20%">
                            <label class="col-form-label" for="inputDefault">Number Of Blocks</label>
                            <input class="form-control" id="initial-input" name="intial" type="text" size="35">
                        </div>
                        <div class="form-group" style="margin-left:50px; float:left;  width: 20%">
                            <label class="col-form-label" for="inputDefault">Block Size</label>
                            <input class="form-control" id="final-input" name="final" type="text" size="35">
                        </div>
                        <div class="form-group" style="margin-left:50px; float:left;  width: 20%">
                            <label class="col-form-label" for="inputDefault">File Input Size</label>
                            <input class="form-control" id="bitstream-input" name="bitstream"
                                placeholder="Space-separated sequence" type="text" size="35">
                        </div>
                    </div>

                </fieldset>
            </form>
            <form>
                <input type="button" class="button2" value="Submit"
                    onclick="filealgo(document.getElementById('algorithm').value,document.getElementById('bitstream-input').value,document.getElementById('initial-input').value,document.getElementById('final-input').value)">
            </form>

        </div>
    </div>
    <br>
    <br>
    <script>
        //alert("HEU");
        //document.getElementById("Print").innerHTML="hey";
        function filealgo(algo, filesize, numberofblocks, blocksize) {
            //document.getElementById("Print").innerHTML="hey";
            // alert("Hey");
            var res = filesize.split(" ");
            var inp = [];
            for (i = 0; i < res.length; i++) {
                inp.push(parseInt(res[i]));
            }
            // document.getElementById("Print").innerHTML=inp.length;
            filesize = parseInt(filesize);
            numberofblocks = parseInt(numberofblocks);
            blocksize = parseInt(blocksize);
            if (algo == "contiguous") {
                contiguous(inp, numberofblocks, blocksize);
            }

        }

        function contiguous(inp, numberofblocks, blocksize) {
            // document.getElementById("Print").innerHTML=inp.length;
            // document.getElementById("Print").innerHTML=inp[1];
            var bvisited = new Array(50);
            var bindex = new Array(50);
            var allocate = [];
            var text1 = "";

            for (i = 0; i < 50; i++) {
                bvisited[i] = 0;
                bindex[i] = i;
            }
            var filelength = inp.length;
            var sindex = 0, count = 0, count_blocks = 0;
            for (i = 0; i < filelength; i++) {
                //console.log("hey");
                count = 0;
                var text = "";
                //  document.getElementById("Print").innerHTML = inp.length;

                if ((inp[i] <= blocksize) && (count_blocks < numberofblocks)) {
                    allocate[count] = count_blocks;
                    bvisited[count_blocks] = 1;
                    inp[i] = inp[i] - blocksize;
                    count++;
                    // count_blocks++;

                }
                else if (inp[i] > blocksize) {
                    while ((inp[i] > 0) && (bvisited[count_blocks + count] == 0) && ((count_blocks + count) < numberofblocks)) {
                        allocate[count] = count_blocks + count;
                        inp[i] = inp[i] - blocksize;
                        bvisited[count_blocks + count] = 1;
                        count++;
                        // count_blocks++;
                    }
                    // count_blocks=count_blocks+count;
                    sindex = sindex + count;
                }
                if (inp[i] <= 0) {
                    count_blocks = count_blocks + count;
                    for (k = 0; k < count; k++) {

                        text = text + "<span> <button class='button button4'>" + (allocate[k] + 1) + "</button> </span>" + "&#8594";
                        // document.getElementById("Blocks_allocated").innerHTML="Block Alloted: " +allocate[i];
                    }
                    text1 = text1 + "Block Alloted: " + text + "<br>";

                }
                else if (inp[i] > 0) {
                    text1 = text1 + "Block not alloted" + "<br>";
                }
            }
            document.getElementById("Blocks_allocated").innerHTML = text1;
        }
    </script>
    <br>
    <br>
    <div class="container">
        <div id="alg_name"></div>
        <div id="Blocks_allocated"></div>
    </div>
    <div class="container">
        <div id="alg_name"></div>
        <div id="Print"></div>
    </div>
    <br>
    <br>
</body>

</html>